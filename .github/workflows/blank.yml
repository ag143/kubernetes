name: CI

on:
  - push

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run a multi-line script
        with: # Set the secret as an input
          super_secret: ${{ secrets.SuperSecret }}
        env: 
          super_secret: ${{ secrets.server }}
          server1: ${{ secrets.server }}
          Greeting: Hello
        run: |
          echo "$Greeting my name"
          chmod +x test.sh
          echo "server value: $super_secret"
          sh test.sh
          pwd
          ls
          cat config
      - name: Trigger deploy
        uses: Consensys/kubernetes-action@master
        env:
          KUBE_CONFIG_DATA: ${{ secrets.KUBE_CONFIG_DATA }}
        with:
          args: create deployment --image ag14341/node-hello-app node-app1
